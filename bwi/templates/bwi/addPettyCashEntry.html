<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css" rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<style>
    @media (min-width: 768px) {

  /* Remve the edge padding needed for mobile */
  .marketing {
    padding-left: 0;
    padding-right: 0;
  }

  /* Navbar positioning foo */
  .navbar-wrapper {
    margin-top: 20px;
    margin-bottom: -90px; /* Negative margin to pull up carousel. 90px is roughly margins and height of navbar. */
  }
  /* The navbar becomes detached from the top, so we round the corners */
  .navbar-wrapper .navbar {
    border-radius: 4px;
  }
.colorgraph {
  height: 5px;
  border-top: 0;
  background: #c4e17f;
  border-radius: 5px;
  background-image: -webkit-linear-gradient(left, #c4e17f, #c4e17f 12.5%, #f7fdca 12.5%, #f7fdca 25%, #fecf71 25%, #fecf71 37.5%, #f0776c 37.5%, #f0776c 50%, #db9dbe 50%, #db9dbe 62.5%, #c49cde 62.5%, #c49cde 75%, #669ae1 75%, #669ae1 87.5%, #62c2e4 87.5%, #62c2e4);
  background-image: -moz-linear-gradient(left, #c4e17f, #c4e17f 12.5%, #f7fdca 12.5%, #f7fdca 25%, #fecf71 25%, #fecf71 37.5%, #f0776c 37.5%, #f0776c 50%, #db9dbe 50%, #db9dbe 62.5%, #c49cde 62.5%, #c49cde 75%, #669ae1 75%, #669ae1 87.5%, #62c2e4 87.5%, #62c2e4);
  background-image: -o-linear-gradient(left, #c4e17f, #c4e17f 12.5%, #f7fdca 12.5%, #f7fdca 25%, #fecf71 25%, #fecf71 37.5%, #f0776c 37.5%, #f0776c 50%, #db9dbe 50%, #db9dbe 62.5%, #c49cde 62.5%, #c49cde 75%, #669ae1 75%, #669ae1 87.5%, #62c2e4 87.5%, #62c2e4);
  background-image: linear-gradient(to right, #c4e17f, #c4e17f 12.5%, #f7fdca 12.5%, #f7fdca 25%, #fecf71 25%, #fecf71 37.5%, #f0776c 37.5%, #f0776c 50%, #db9dbe 50%, #db9dbe 62.5%, #c49cde 62.5%, #c49cde 75%, #669ae1 75%, #669ae1 87.5%, #62c2e4 87.5%, #62c2e4);
}
</style>

{% include "bwi/common/_header.html" %}

<div class="container" style="margin-top:100px">
    <div class="wrapper">

<div class="row">
    <div class="container">



    <div class="col-xs-12 col-sm-8 col-md-6 col-sm-offset-2 col-md-offset-3">
        <div class="message">
            {{message}}
        </div>
		<form role="form" name="myForm" onSubmit="return validateForm()" method="post" action="/addPettyCashEntry"  class="box">
            {% csrf_token %}
			<h2><small> Add New Petty Cash Entry.</small></h2>
            <br/>
			<div class="row">
				<div class="col-xs-12 col-sm-6 col-md-6">
					<div class="form-group">
                        <input type="text" name="receiptNumber" id="receiptNumber" class="form-control input-sm" placeholder="Receipt Number" tabindex="1">
					</div>
				</div>
				<div class="col-xs-12 col-sm-6 col-md-6">
					<div class="form-group">
                        <select type="text" name="paymentType" id="paymentType" class="form-control input-sm" placeholder="Payment Type" tabindex="2">
                        	<option value="">Payment Type</option>
                            <option value="Cash">Cash</option>
                            <option value="Cheque">Cheque</option>
                            <option value="Other">Other</option>
                        </select>
					</div>
				</div>
			</div>
            <div class="row">
                <div class="col-xs-12 col-sm-6 col-md-6">
			<div class="form-group">
				<input type="text" name="beneficiary" id="beneficiary" class="form-control input-sm" placeholder="Beneficiary Name" tabindex="4">
                    </div>
                </div>
                    <div class="col-xs-12 col-sm-6 col-md-6">
			<div class="form-group">
                <select type="text" name="category" id="category" class="form-control input-sm" placeholder="Remarks" tabindex="4">
                    <option value="">Category</option>
					{% for category in categories %}
                    <option value={{category.name}}>{{category.name}}</option>
                    {% endfor %}
				</select>
                        </div>
                    </div>
			</div>
            <div class="form-group">
				<input type="text" name="description" id="description" class="form-control input-sm" placeholder="Description" tabindex="4">
			</div>
            <div class="row">
                <div class="col-xs-12 col-sm-6 col-md-6">
					<div class="form-group">
                        <input type="number" name="quantity" id="quantity" class="form-control input-sm" placeholder="Quantity" tabindex="1">
					</div>
				</div>
				<div class="col-xs-12 col-sm-6 col-md-6">
					<div class="form-group">
                        <select type="text" name="uom" id="uom" class="form-control input-sm" placeholder="UOM" tabindex="2">
                        	<option value="">UOM</option>
                            <option value="packets">Pkt.</option>
                            <option value="pieces">Pcs.</option>
                            <option value="bundles">Bndl.</option>
                            <option value="litre">Ltr.</option>
                            <option value="drums">Drum</option>
                            <option value="trips">Trip</option>
                            <option value="kilograms">Kg</option>
                            <option value="kilometers">Km.</option>
                            <option value="meters">Mtr.</option>
                            <option value="cans">Can</option>
                        </select>
					</div>
				</div>
			</div>
            <div class="row">
				<div class="col-xs-12 col-sm-6 col-md-6">
					<div class="form-group">
                        <input type="number" step="0.01"  min="0.00" max="99999.99" name="unitPrice" id="unitPrice" class="form-control input-sm" placeholder="Unit Price" tabindex="1">
					</div>
				</div>
				<div class="col-xs-12 col-sm-6 col-md-6">
					<div class="form-group">
						<input type="number" name="totalAmount" id="totalAmount" class="form-control input-sm" placeholder="Total Amount" tabindex="2" readonly>
					</div>
				</div>
			</div>
            <div class="form-group">
				<input type="text" name="remarks" id="remarks" class="form-control input-sm" placeholder=" Remarks" tabindex="4">
			</div>

			<div class="row">

				<div class="col-xs-6 col-md-3"><input type="submit" value="Save" class="btn btn-primary btn-block btn-lg submit" tabindex="7"></div>
                <div class="col-md-6">
                </div>
                <div class="col-xs-6 col-md-3"><a href="/pettycash"><input value="Exit" class="btn btn-primary btn-block btn-lg" tabindex="7"></a></div>
			</div>
		</form>
	</div>
</div>
        </div>
    </div>
</div>


<script>
     function raisealert(msg){
         alert(msg + " must be filled out");
         return false;
    }

    function validateForm() {
        var x = document.forms["myForm"]["receiptNumber"].value;
        if (x == "") {
            return raisealert("Receipt Number")
        }
        x = document.forms["myForm"]["paymentType"].value;
        if (x == "") {
            return raisealert("Payment Type")
        }
         x = document.forms["myForm"]["beneficiary"].value;
        if (x == "") {
            return raisealert("Beneficiary")
        }
         x = document.forms["myForm"]["description"].value;
        if (x == "") {
            return raisealert("Description")
        }
         x = document.forms["myForm"]["unitPrice"].value;
        if (x == "") {
            return raisealert("Unit Price")
        }
         x = document.forms["myForm"]["uom"].value;
        if (x == "") {
            return raisealert("UOM")
        }
        x = document.forms["myForm"]["quantity"].value;
        if (x == "") {
            return raisealert("Quantity")
        }
        x = document.forms["myForm"]["category"].value;
        if (x == "") {
            return raisealert("Category")
        }
         x = document.forms["myForm"]["remarks"].value;
        if (x == "") {
            return raisealert("Remarks")
        }
        return true;
	}
	$(function () {

     $("#quantity").keyup(function(){
            calculateTotalAmount();
        });
         $("#unitPrice").keyup(function(){
           calculateTotalAmount();
        });

        function calculateTotalAmount(){
            var quantity = parseInt($("#quantity").val());
            var unitPrice =  parseFloat($("#unitPrice").val());
            var total = 0;
            if (!isNaN(quantity*unitPrice)){
            	total = quantity*unitPrice;
            }
            $('#totalAmount').val(total);
        }
    $('.button-checkbox').each(function () {

        // Settings
        var $widget = $(this),
            $button = $widget.find('button'),
            $checkbox = $widget.find('input:checkbox'),
            color = $button.data('color'),
            settings = {
                on: {
                    icon: 'glyphicon glyphicon-check'
                },
                off: {
                    icon: 'glyphicon glyphicon-unchecked'
                }
            };

        // Event Handlers
        $button.on('click', function () {
            $checkbox.prop('checked', !$checkbox.is(':checked'));
            $checkbox.triggerHandler('change');
            updateDisplay();
        });
        $checkbox.on('change', function () {
            updateDisplay();
        });

        // Actions
        function updateDisplay() {
            var isChecked = $checkbox.is(':checked');

            // Set the button's state
            $button.data('state', (isChecked) ? "on" : "off");

            // Set the button's icon
            $button.find('.state-icon')
                .removeClass()
                .addClass('state-icon ' + settings[$button.data('state')].icon);

            // Update the button's color
            if (isChecked) {
                $button
                    .removeClass('btn-default')
                    .addClass('btn-' + color + ' active');
            }
            else {
                $button
                    .removeClass('btn-' + color + ' active')
                    .addClass('btn-default');
            }
        }

        // Initialization
        function init() {

            updateDisplay();

            // Inject the icon if applicable
            if ($button.find('.state-icon').length == 0) {
                $button.prepend('<i class="state-icon ' + settings[$button.data('state')].icon + '"></i>');
            }
        }
        init();
    });
});
</script>
